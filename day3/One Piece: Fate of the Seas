import random

print("Welcome to One Piece Adventure ğŸ´â€â˜ ï¸\nYour Mission is to find the One Piece")
print("âš ï¸ The sea is unpredictable. Even the right choice can fail...")

First_stage = ['left', 'right', 'straight']
Second_stage = ['wait', 'swim']
Final_stage = ['red', 'blue', 'yellow', 'orange']


def valid_input_not(choice, stage):
    if choice in stage:
        return choice
    else:
        one_last = input(f"Invalid input. Please enter one of {stage}: ").lower()
        if one_last in stage:
            return one_last
        else:
            return False


play_again = True

while play_again:

    direction = input(
        "You're at a crossroad. Where do you want to go?\n"
        "\tChoose 'left' or 'right'\n"
    ).lower()

    direction = valid_input_not(direction, First_stage)

    if direction:
        if direction == random.choice(First_stage):
            print("ğŸ¥³ First stage completed!\n")

            lake_decision = input(
                "You've come to a lake. There is an island in the middle of the lake.\n"
                "\tType 'wait' to wait for a boat or 'swim' to swim across\n"
            ).lower()

            lake_decision = valid_input_not(lake_decision, Second_stage)

            if lake_decision:
                if lake_decision == random.choice(Second_stage):
                    print("ğŸŠ You're on Loguetown Island")

                    three_sides_choice = input(
                        "You arrive at the island unharmed. Which direction would you like to go?\n"
                        "Left, Right, or Straight\n"
                    ).lower()

                    three_sides_choice = valid_input_not(three_sides_choice, First_stage)

                    if three_sides_choice:
                        if three_sides_choice == random.choice(First_stage):

                            door = input(
                                "You reached Roger's home. There are 3 doors.\n"
                                "Which door would you like to choose?\n"
                                "red, blue, yellow, or orange\n"
                            ).lower()

                            door = valid_input_not(door, Final_stage)

                            if door:
                                if door == random.choice(Final_stage):
                                    print(
                                        "Hurry! ğŸ¥³ğŸŠğŸ’° You are now the King of Pirates ğŸ´â€â˜ ï¸.\n"
                                        "ğŸ˜µâ€ğŸ’« Imu is going to kill you!"
                                    )
                                else:
                                    print(
                                        "You lost ğŸ˜µâ€ğŸ’«. By the way, the Navy is waiting outside the house for you ğŸ¥¶"
                                    )
                            else:
                                print("You lost! Now Kaido is coming to kill you.")
                        else:
                            print(
                                "You messed with Big Mom. Now she is coming for you. By the way, you lost."
                            )
                    else:
                        print("The Navy caught you ğŸ™ƒ")
                else:
                    print("Your boat collapsed at the Red Line ğŸ˜¶â€ğŸŒ«ï¸")
            else:
                print(
                    "You messed with Crocodile. He was waiting for you.\n"
                    "By the way, you lost your chance to find the One Piece."
                )
        else:
            print(
                "You and your crew were heavily damaged by a sea monster attack.\n"
                "Try again after you all recover."
            )
    else:
        print(
            "You do not have enough crew members to find the One Piece.\n"
            "Try again after you get more crew."
        )

    again = input("\nDo you want to play again? (yes/no): ").lower()
    if again != 'yes':
        print("Thanks for playing ğŸ´â€â˜ ï¸")
        play_again = False
